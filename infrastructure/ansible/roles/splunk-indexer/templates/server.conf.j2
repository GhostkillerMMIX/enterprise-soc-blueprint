# Splunk Indexer server.conf
# Generated by Ansible - Do not modify manually

[general]
serverName = {{ ansible_hostname }}-{{ splunk_role }}
sessionTimeout = 1h

[sslConfig]
{% if splunk_ssl_enabled %}
enableSplunkdSSL = true
sslVersions = tls1.2
cipherSuite = ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256
ecdhCurves = prime256v1,secp384r1,secp521r1
serverCert = {{ splunk_ssl_cert }}
sslPassword = {{ splunk_secrets.ssl_password | default('') }}
{% else %}
enableSplunkdSSL = false
{% endif %}

[diskUsage]
minFreeSpace = 5000

[indexing]
maxMemMB = 20
maxHotIdleSecs = 86400
maxHotBuckets = {{ splunk_max_hot_buckets }}
maxWarmDBCount = {{ splunk_max_warm_db_count }}

{% if splunk_cluster_master is defined %}
[clustering]
mode = peer
master_uri = https://{{ splunk_cluster_master }}:{{ splunk_mgmt_port }}
pass4SymmKey = {{ splunk_secrets.cluster_key }}
cluster_label = {{ splunk_cluster_label }}
replication_port = {{ splunk_replication_port }}
{% endif %}

[replication_port://{{ splunk_replication_port }}]

[tcpout]
defaultGroup = indexer_discovery

[tcpout:indexer_discovery]
master_uri = https://{{ splunk_cluster_master }}:{{ splunk_mgmt_port }}
pass4SymmKey = {{ splunk_secrets.indexer_discovery }}

[license]
master_uri = https://{{ splunk_license_master }}:{{ splunk_mgmt_port }}

[httpServer]
max-age = 31536000

[deployment-client]
{% if splunk_deployment_server is defined %}
targetUri = {{ splunk_deployment_server }}:{{ splunk_mgmt_port }}
{% endif %}

[kvstore]
port = {{ splunk_kvstore_port }}
storageEngine = wiredTiger

[thruput]
maxKBps = 0
